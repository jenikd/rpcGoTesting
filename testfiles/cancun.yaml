ignore: false

deploy:
  - contract_id: 1
    # Transient storage solidity 0.8.26 VM compiler set to cancun
    # // SPDX-License-Identifier: UNLICENSED pragma solidity ^0.8.26; contract TestStorageCall { TestTransientStorage t; constructor() { t = new TestTransientStorage(); } function transientStore(uint256 v) public returns (uint256) { t.store(v); return t.val(); } function testVal() public view returns (uint256) { return t.val(); } } contract TestTransientStorage { bytes32 constant SLOT = 0; function store(uint256 v) public { assembly { tstore(SLOT, v) } } function val() public view returns (uint256 v) { assembly { v := tload(SLOT) } } }
    abi: '[{"inputs":[{"internalType":"uint256","name":"v","type":"uint256"}],"name":"transientStore","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"testVal","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]'
    bytecode: 0x6080604052348015600e575f80fd5b506040516019906074565b604051809103905ff0801580156031573d5f803e3d5ffd5b505f806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506081565b610142806103c083390190565b6103328061008e5f395ff3fe608060405234801561000f575f80fd5b5060043610610034575f3560e01c806377001dd614610038578063cbe929a114610056575b5f80fd5b610040610086565b60405161004d919061024b565b60405180910390f35b610070600480360381019061006b9190610292565b610119565b60405161007d919061024b565b60405180910390f35b5f805f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16633c6bb4366040518163ffffffff1660e01b8152600401602060405180830381865afa1580156100f0573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061011491906102d1565b905090565b5f805f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16636057361d836040518263ffffffff1660e01b8152600401610173919061024b565b5f604051808303815f87803b15801561018a575f80fd5b505af115801561019c573d5f803e3d5ffd5b505050505f8054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16633c6bb4366040518163ffffffff1660e01b8152600401602060405180830381865afa158015610208573d5f803e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061022c91906102d1565b9050919050565b5f819050919050565b61024581610233565b82525050565b5f60208201905061025e5f83018461023c565b92915050565b5f80fd5b61027181610233565b811461027b575f80fd5b50565b5f8135905061028c81610268565b92915050565b5f602082840312156102a7576102a6610264565b5b5f6102b48482850161027e565b91505092915050565b5f815190506102cb81610268565b92915050565b5f602082840312156102e6576102e5610264565b5b5f6102f3848285016102bd565b9150509291505056fea26469706673582212203d231d595144c8e6925846f0f5b9800db7ae934065a7ec57471f2325f7ce56b364736f6c634300081a00336080604052348015600e575f80fd5b506101268061001c5f395ff3fe6080604052348015600e575f80fd5b50600436106030575f3560e01c80633c6bb4361460345780636057361d14604e575b5f80fd5b603a6066565b60405160459190608a565b60405180910390f35b606460048036038101906060919060ca565b606e565b005b5f805c905090565b805f5d50565b5f819050919050565b6084816074565b82525050565b5f602082019050609b5f830184607d565b92915050565b5f80fd5b60ac816074565b811460b5575f80fd5b50565b5f8135905060c48160a5565b92915050565b5f6020828403121560dc5760db60a1565b5b5f60e78482850160b8565b9150509291505056fea26469706673582212203982303f9868d39ef7a8ace8b799c45f41389717343b54c44a28c360c24a51b164736f6c634300081a0033

contract_call:
  - call_id: 1
    contract_id: 1
    method_name: transientStore
    arguments: [987654]

test_call:
  - test_id: 1
    call_id: 1
    test_name: "Get transient storage test call result"
    method_name: debug_traceTransaction
    arguments: [tx.hash,{"timeout":"2m","tracer":"callTracer"}]
    result: {"from":"0x239fa7623354ec26520de878b52f13fe84b06971","gas":"0x6f3a","gasUsed":"0x6f3a","to":"0x86989606a88841e2fb56787806a5f7a3a89641e2","input":"0xcbe929a100000000000000000000000000000000000000000000000000000000000f1206","output":"0x00000000000000000000000000000000000000000000000000000000000f1206","calls":[{"from":"0x86989606a88841e2fb56787806a5f7a3a89641e2","gas":"0x6c6","gasUsed":"0x1fa","to":"0x831cd2c34e3c50d10c9fd84bd893942c97b6d5a0","input":"0x6057361d00000000000000000000000000000000000000000000000000000000000f1206","value":"0x0","type":"CALL"},{"from":"0x86989606a88841e2fb56787806a5f7a3a89641e2","gas":"0x38b","gasUsed":"0x19a","to":"0x831cd2c34e3c50d10c9fd84bd893942c97b6d5a0","input":"0x3c6bb436","output":"0x00000000000000000000000000000000000000000000000000000000000f1206","type":"STATICCALL"}],"value":"0x0","type":"CALL"}
    ignore_fields: ["to","from","gas","gasUsed"]